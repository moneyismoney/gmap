"use strict";function initMap(){el=document.getElementById("map"),map=new google.maps.Map(el,{center:{lat:y,lng:x},zoom:11,mapTypeId:google.maps.MapTypeId.ROADMAP});var a=function(a){function b(a){if(!a)return!1;var b=a.getNorthEast(),c=a.getSouthWest();return{north:b.lat(),south:c.lat(),east:b.lng(),west:c.lng()}}function c(b){return new google.maps.Rectangle({strokeColor:"#FF0000",strokeOpacity:.65,strokeWeight:.1,fillColor:"#F0F000",fillOpacity:0,map:a.map,bounds:b})}var d,e=a.grid,f=a.scale,g=b(a.map.getBounds()),h=[f[0]/e[0],f[1]/e[1]],i=g.north-g.south,j=g.east-g.west,k={lng:f[0]/j,lat:f[1]/i};return{toGeo:function(a,b){return{lat:b/k.lat+g.south,lng:a/k.lng+g.west}},getIDmark:function(a,b){return Math.round(b/h[1])*e[0]+(e[0]-Math.round(a/h[0]))-1},createGrid:function(){for(var a,b,d,f,h,k=e[1],l=i/k,m=j/k;k--;)for(d=e[0],b=k*l,f=g.north-b,h=g.north-l-b;d--;)a=d*m,rec[rec.length]=c({north:f,south:h,east:g.west+m+a,west:g.west+a});return this},data:function(a){return d=a,this},draw:function(a){for(var b=d.length;b--;){var c=this.getIDmark(d[b][0],d[b][1]);rec[c]&&this.setNewColor(rec[c],d[b][2],.7)}return this},setNewColor:function(a,b,c){return window.setTimeout(function(){a.setOptions({fillColor:b,fillOpacity:c})},100),this},loadData:function(a){if(!/file:/.test(window.location.protocol)){var b=window.XMLHttpRequest?new XMLHttpRequest:window.XMLHttpRequest?new ActiveXObject("Microsoft.XMLHTTP"):null;if(!b)return!1;var c="function"==typeof a.success?a.success:null,e="string"==typeof a.url?a.url.replace(/\?.*$/g,""):null;return b.onreadystatechange=function(a){if(4===b.readyState&&200===b.status){var e=JSON.parse(b.responseText);d=e,c&&c(e)}},b.open("GET",e,!0),b.setRequestHeader("X-Requested-With","XmlHttpRequest"),b.setRequestHeader("Accept","application/json"),b.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),b.setRequestHeader("Cache-Control","no-cache"),b.send(),this}d=window.geoData,this.draw()}}},b=setInterval(function(){if(map.getBounds()){clearInterval(b);var c=a({scale:[el.offsetWidth,el.offsetHeight],map:map,grid:[40,40]});c.createGrid(),c.loadData({url:"js/data.json",success:function(a){c.draw("#a93434")}})}},200);map.data.loadGeoJson("js/new1.json"),map.data.setStyle(function(a){return console.log(a),{strokeColor:"#FF0000",fillColor:"green",strokeWeight:1,icon:{path:google.maps.SymbolPath.CIRCLE,scale:2}}})}var el,map,rec=[],y=50.435286,x=30.574576,coord=[];